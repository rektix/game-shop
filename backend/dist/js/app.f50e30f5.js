(function(e){function t(t){for(var a,o,i=t[0],c=t[1],l=t[2],m=0,d=[];m<i.length;m++)o=i[m],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&d.push(r[o][0]),r[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(d.length)d.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,i=1;i<n.length;i++){var c=n[i];0!==r[c]&&(a=!1)}a&&(s.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},r={app:0},s=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=c;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("85ec")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",{attrs:{id:"nav"}},[e.isLoggedIn?n("div",[n("router-link",{attrs:{to:"/"}},[e._v("Home")]),e._v(" | "),e.isAdmin?n("router-link",{attrs:{to:"/edit"}},[e._v("New Game")]):e._e(),e._v(" | "),n("router-link",{attrs:{to:"/user"}},[e._v("User")]),e._v(" | "),n("b-button",{attrs:{variant:"primary"},on:{click:e.logout}},[e._v("Log Out")])],1):n("div",[n("router-link",{attrs:{to:"/register"}},[e._v("Register")]),e._v(" | "),n("router-link",{attrs:{to:"/login"}},[e._v("Log in")])],1)]),n("router-view")],1)},s=[],o=n("5530"),i=n("2f62"),c={name:"App",computed:{isLoggedIn:function(){return this.$store.getters.isLoggedIn},isAdmin:function(){return this.$store.getters.isAdmin}},methods:Object(o["a"])(Object(o["a"])({},Object(i["b"])(["load_games"])),{},{logout:function(){this.$store.dispatch("logout"),this.$router.push("/login")}})},l=c,u=(n("034f"),n("2877")),m=Object(u["a"])(l,r,s,!1,null,null,null),d=m.exports,p=n("8c4f"),g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("Header"),n("b-container",[n("b-row",[n("b-col",{attrs:{cm:"6"}},[e.isLoggedIn?n("GameList"):e._e()],1)],1)],1)],1)},f=[],h=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},b=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v("Game Shop")])])}],v={name:"Header",computed:Object(o["a"])({},Object(i["c"])(["games"]))},_=v,w=(n("5b1c"),Object(u["a"])(_,h,b,!1,null,"0067c89e",null)),y=w.exports,O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.games.length?n("b-table",{attrs:{hover:"","sticky-header":"800px",items:e.games,fields:e.fields,"head-variant":"dark"},on:{"row-clicked":e.editGame},scopedSlots:e._u([{key:"cell(action)",fn:function(t){return[e.isAdmin?n("b-button",{attrs:{variant:"danger"},on:{click:function(n){return e.delete_game(t.item.id)}}},[e._v("Delete")]):e._e()]}}],null,!1,3324533638)}):n("h1",[e._v("No games")])],1)},j=[],x={name:"GameList",computed:Object(o["a"])(Object(o["a"])({},Object(i["c"])(["games"])),{},{isAdmin:function(){return this.$store.getters.isAdmin}}),data:function(){return{fields:[{key:"name"},{key:"genre"},{key:"score"},{key:"action"}]}},mounted:function(){this.load_games()},methods:Object(o["a"])(Object(o["a"])({},Object(i["b"])(["delete_game","load_games"])),{},{editGame:function(e){he.push({path:"/game/".concat(e.id)})}})},k=x,S=(n("a7c6"),Object(u["a"])(k,O,j,!1,null,null,null)),G=S.exports,N={name:"home",components:{Header:y,GameList:G},mounted:function(){this.load_games()},computed:{isLoggedIn:function(){return this.$store.getters.isLoggedIn}}},$=N,P=Object(u["a"])($,g,f,!1,null,null,null),E=P.exports,C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Header"),n("b-container",[n("b-row",[n("b-col",{attrs:{cm:"6"}},[e.edit?n("div",[n("EditGame",{attrs:{name:e.game.name,genre:e.game.genre,score:e.game.score,description:e.game.description,price:e.game.price}})],1):n("div",[e.games.length?n("ShowGame",{attrs:{game:e.game}}):e._e()],1),n("b-button",{attrs:{variant:"primary"},on:{click:function(t){return e.buy_game(e.game.id)}}},[e._v("Buy Game")])],1)],1),n("b-row",[n("b-col",{staticStyle:{"margin-top":"10px"},attrs:{cm:"2"}},[e.isAdmin?n("b-button",{attrs:{variant:"primary",size:"lg"},domProps:{innerHTML:e._s(e.edit?"Cancel":"Edit")},on:{click:e.toggleEdit}}):e._e()],1)],1)],1)],1)},L=[],A=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",{attrs:{fluid:""}},[n("b-form",[n("b-row",{staticClass:"mt-2"},[n("b-col",{attrs:{sm:"3"}},[n("label",[e._v("Name:")])]),n("b-col",{attrs:{sm:"9"}},[n("b-form-input",{attrs:{type:"text",placeholder:"Name"},model:{value:e.newName,callback:function(t){e.newName=t},expression:"newName"}})],1)],1),n("b-row",{staticClass:"mt-2"},[n("b-col",{attrs:{sm:"3"}},[n("label",[e._v("Genre:")])]),n("b-col",{attrs:{sm:"9"}},[n("b-form-input",{attrs:{type:"text",placeholder:"Genre"},model:{value:e.newGenre,callback:function(t){e.newGenre=t},expression:"newGenre"}})],1)],1),n("b-row",{staticClass:"mt-2"},[n("b-col",{attrs:{sm:"3"}},[n("label",[e._v("Score:")])]),n("b-col",{attrs:{sm:"9"}},[n("b-form-input",{attrs:{type:"number",placeholder:"Score"},model:{value:e.newScore,callback:function(t){e.newScore=e._n(t)},expression:"newScore"}})],1)],1),n("b-row",{staticClass:"mt-2"},[n("b-col",{attrs:{sm:"3"}},[n("label",[e._v("Description:")])]),n("b-col",{attrs:{sm:"9"}},[n("b-form-textarea",{attrs:{type:"text",placeholder:"Description"},model:{value:e.newDescription,callback:function(t){e.newDescription=t},expression:"newDescription"}})],1)],1),n("b-row",{staticClass:"mt-2"},[n("b-col",{attrs:{sm:"3"}},[n("label",[e._v("Price:")])]),n("b-col",{attrs:{sm:"9"}},[n("b-form-input",{attrs:{type:"number",placeholder:"Price"},model:{value:e.newPrice,callback:function(t){e.newPrice=e._n(t)},expression:"newPrice"}})],1)],1),n("b-row",{staticClass:"mt-2"},[n("div",[n("b-button",{attrs:{variant:"primary",size:"lg"},on:{click:e.addNew}},[e._v("Save")])],1)])],1)],1)},D=[],H=(n("a4d3"),n("e01a"),n("b0c0"),n("a9e3"),{name:"EditGame",props:{name:{type:String,default:""},genre:{type:String,default:""},score:{type:Number,default:0},description:{type:String,default:""},price:{type:Number,default:0}},data:function(){return{newName:"",newGenre:"",newScore:0,newDescription:"",newPrice:0}},mounted:function(){this.newName=this.name,this.newGenre=this.genre,this.newScore=this.score,this.newDescription=this.description,this.newPrice=this.price},methods:Object(o["a"])(Object(o["a"])({},Object(i["b"])(["new_game","change_game"])),{},{validate:function(){return this.newName?this.newName.length<1||this.newName.length>60?(alert("Name must have less than 60 characters."),!1):this.newGenre?this.newGenre.length<1||this.newGenre.length>60?(alert("Genre must have less than 60 characters."),!1):this.newScore?this.newScore<1||this.newScore.length>10?(alert("Score must be between 1 and 10."),!1):this.newDescription?!!this.newPrice||(alert("Price is missing."),!1):(alert("Description is missing."),!1):(alert("Score is missing."),!1):(alert("Genre is missing."),!1):(alert("Name is missing."),!1)},addNew:function(){if(this.validate()){var e=JSON.stringify({name:this.newName,genre:this.newGenre,score:this.newScore,description:this.newDescription,price:this.newPrice});this.$route.params.id?this.change_game({id:this.$route.params.id,msg:e}):this.new_game(e)}}})}),I=H,T=Object(u["a"])(I,A,D,!1,null,"5508e90d",null),U=T.exports,M=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",{attrs:{fluid:""}},[n("b-row",[n("b-col",{attrs:{sm:"2"}},[n("label",{attrs:{for:"user"}},[e._v("Name:")])]),n("b-col",{attrs:{sm:"10"}},[n("p",{staticStyle:{"text-align":"left"},attrs:{id:"user"}},[e._v(e._s(e.game.name))])])],1),n("b-row",{staticClass:"mt-2"},[n("b-col",{attrs:{sm:"2"}},[n("label",{attrs:{for:"msg"}},[e._v("Genre:")])]),n("b-col",{attrs:{sm:"10"}},[n("p",{staticStyle:{"text-align":"left"},attrs:{id:"msg"}},[e._v(e._s(e.game.genre))])])],1),n("b-row",{staticClass:"mt-2"},[n("b-col",{attrs:{sm:"2"}},[n("label",{attrs:{for:"msg"}},[e._v("Score:")])]),n("b-col",{attrs:{sm:"10"}},[n("p",{staticStyle:{"text-align":"left"},attrs:{id:"msg"}},[e._v(e._s(e.game.score))])])],1),n("b-row",{staticClass:"mt-2"},[n("b-col",{attrs:{sm:"2"}},[n("label",{attrs:{for:"msg"}},[e._v("Description:")])]),n("b-col",{attrs:{sm:"10"}},[n("p",{staticStyle:{"text-align":"left"},attrs:{id:"msg"}},[e._v(e._s(e.game.description))])])],1),n("b-row",{staticClass:"mt-2"},[n("b-col",{attrs:{sm:"2"}},[n("label",{attrs:{for:"msg"}},[e._v("Price:")])]),n("b-col",{attrs:{sm:"10"}},[n("p",{staticStyle:{"text-align":"left"},attrs:{id:"msg"}},[e._v("$"+e._s(e.game.price))])])],1)],1)},z=[],J={name:"ShowGame",props:{game:Object}},B=J,R=Object(u["a"])(B,M,z,!1,null,null,null),q=R.exports,F={name:"Game",components:{Header:y,EditGame:U,ShowGame:q},data:function(){return{edit:!1}},computed:Object(o["a"])(Object(o["a"])({},Object(i["c"])(["games"])),{},{isAdmin:function(){return this.$store.getters.isAdmin},game:function(){for(var e=0;e<this.games.length;e++)if(this.games[e].id===parseInt(this.$route.params.id))return this.games[e]}}),methods:Object(o["a"])(Object(o["a"])({},Object(i["b"])(["buy_game"])),{},{toggleEdit:function(){this.edit=!this.edit},buy:function(){console.log("bought game")}})},K=F,Q=Object(u["a"])(K,C,L,!1,null,"9703ac36",null),V=Q.exports,W=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("Header"),n("b-container",[n("b-row",[n("b-col",{attrs:{cm:"6"}},[n("EditGame")],1)],1)],1)],1)},X=[],Y={name:"NewMessage",components:{Header:y,EditGame:U}},Z=Y,ee=Object(u["a"])(Z,W,X,!1,null,"08d38582",null),te=ee.exports,ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Header"),n("h1",[e._v(e._s(e.user.name))]),e._l(e.user.games,(function(t,a){return n("p",{key:a},[e._v(e._s(a+1)+": "+e._s(t.name))])}))],2)},ae=[],re={name:"User",components:{Header:y},data:function(){return{edit:!1}},created:function(){this.get_user()},computed:Object(o["a"])({},Object(i["c"])(["user"])),methods:Object(o["a"])({},Object(i["b"])(["get_user"]))},se=re,oe=Object(u["a"])(se,ne,ae,!1,null,"9f1ff442",null),ie=oe.exports,ce=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",["register"==e.type?n("h1",[e._v("Sign Up")]):n("h1",[e._v("Log In")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",placeholder:"Username"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",placeholder:"Password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),n("b-button",{attrs:{variant:"primary"},on:{click:e.registerUser}},[e._v("Sign Up ")]),e.msg?n("p",[e._v(e._s(e.msg))]):e._e()],1)},le=[],ue={props:["type"],data:function(){return{username:"",password:"",msg:""}},methods:Object(o["a"])(Object(o["a"])({},Object(i["b"])(["register","login"])),{},{validate:function(){return!0},registerUser:function(){var e=this;if(this.validate()){var t=JSON.stringify({username:this.username,password:this.password});"register"==this.type?this.register(t).then((function(){e.$router.push("/")})):this.login(t).then((function(){e.$router.push("/")}))}}})},me=ue,de=Object(u["a"])(me,ce,le,!1,null,null,null),pe=de.exports;a["default"].use(p["a"]);var ge=[{path:"/",name:"home",component:E},{path:"/edit",name:"newGame",component:te},{path:"/game/:id",name:"game",component:V},{path:"/user",name:"user",component:ie},{path:"/register",name:"register",component:pe,props:{type:"register"}},{path:"/login",name:"login",component:pe,props:{type:"login"}}],fe=new p["a"]({mode:"history",base:"/",routes:ge}),he=fe,be=(n("a434"),n("bc3a")),ve=n.n(be),_e=n("0e44");a["default"].use(i["a"]);var we=new i["a"].Store({plugins:[Object(_e["a"])()],state:{games:[],token:"",user:{}},getters:{isLoggedIn:function(e){return e.token},isAdmin:function(e){return"admin"==e.user.name}},mutations:{set_token:function(e,t){e.token=t},set_user:function(e,t){e.user=t},set_games:function(e,t){e.games=t},add_game:function(e,t){e.games.push(t)},remove_game:function(e,t){for(var n=0;n<e.games.length;n++)if(e.games[n].id===t){e.games.splice(n,1);break}},update_game:function(e,t){for(var n=0;n<e.games.length;n++)if(e.games[n].id===parseInt(t.id)){e.games[n].name=t.msg.name,e.games[n].genre=t.msg.genre,e.games[n].score=t.msg.score,e.games[n].description=t.msg.description,e.games[n].price=t.msg.price;break}},reset:function(e){e.token="",e.games=[],e.user={}}},actions:{get_user:function(e){var t=e.commit;ve.a.get("http://localhost/api/user/list").then((function(e){if(200!=e.status)throw e;return e.data})).then((function(e){t("set_user",e)}))},logout:function(e){var t=e.commit;t("reset","")},register:function(e,t){var n=e.commit;console.log(n),ve.a.post("http://localhost/api/auth/register",t,{headers:{"Content-Type":"application/json"}}).then((function(e){if(200!=e.status)throw e;return e.data})).catch((function(e){"function"===typeof e.text?e.text().then((function(e){alert(e)})):alert(e.response.data.msg)}))},login:function(e,t){var n=e.commit;ve.a.post("http://localhost/api/auth/login",t,{headers:{"Content-Type":"application/json"}}).then((function(e){if(200!=e.status)throw e;return e.data})).then((function(e){n("set_token",e.token),console.log(ve.a.defaults.headers.common),ve.a.defaults.headers.common["Authorization"]="Bearer ".concat(e.token),console.log(ve.a.defaults.headers.common)})).catch((function(e){"function"===typeof e.text?e.text().then((function(e){alert(e)})):alert(e.response.data.msg)}))},buy_game:function(e,t){var n=e.commit;console.log(n),ve.a.post("http://localhost/api/games/buy/".concat(t)).then((function(e){if(200!=e.status)throw e})).catch((function(e){"function"===typeof e.text?e.text().then((function(e){alert(e)})):alert(e.response.data.msg)}))},load_games:function(e){var t=e.commit;ve.a.get("http://localhost/api/games").then((function(e){if(200!=e.status)throw e;return e.data})).then((function(e){console.log(e),t("set_games",e)})).catch((function(e){"function"===typeof e.text?e.text().then((function(e){alert(e)})):alert(e.response.data.msg)}))},delete_game:function(e,t){var n=e.commit;ve.a.delete("http://localhost/api/games/".concat(t)).then((function(e){if(200!=e.status)throw e;return e.data})).then((function(e){n("remove_game",e.id)})).catch((function(e){"function"===typeof e.text?e.text().then((function(e){alert(e)})):alert(e.response.data.msg)}))},new_game:function(e,t){var n=e.commit;ve.a.post("http://localhost/api/games",t,{headers:{"Content-Type":"application/json"}}).then((function(e){if(200!=e.status)throw e;return e.data})).then((function(e){n("add_game",e)})).catch((function(e){"function"===typeof e.text?e.text().then((function(e){alert(e)})):alert(e.response.data.msg)}))},change_game:function(e,t){var n=e.commit;ve.a.put("http://localhost/api/games/".concat(t.id),t.msg,{headers:{"Content-Type":"application/json"}}).then((function(e){if(200!=e.status)throw e;return e.data})).then((function(e){n("update_game",{id:t.id,msg:e})})).catch((function(e){"function"===typeof e.text?e.text().then((function(e){alert(e)})):alert(e.response.data.msg)}))}}}),ye=n("5f5b");n("f9e3"),n("2dd8");ve.a.defaults.headers.common["Authorization"]="Bearer ".concat(we.state.token),a["default"].use(ye["a"]),a["default"].config.productionTip=!1,new a["default"]({router:he,store:we,render:function(e){return e(d)}}).$mount("#app")},"59dd":function(e,t,n){},"5b1c":function(e,t,n){"use strict";n("a2c1")},"85ec":function(e,t,n){},a2c1:function(e,t,n){},a7c6:function(e,t,n){"use strict";n("59dd")}});
//# sourceMappingURL=app.f50e30f5.js.map